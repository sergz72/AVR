.include "m64def.inc"

;.equ TEST=1

.equ FOSC   = 16000000

.equ T0CODE = FOSC / 8 / 8000 ; 8000 interrupts per second

.equ PWMCODE   = 32
.equ PWM_STOP  = (1<<WGM01) | (1<<WGM00) | (1<<CS00)
.equ PWM_START = (1<<WGM01) | (1<<WGM00) | (1<<COM01) | (1<<CS00)

.equ CNTRL_MAX = 160

.equ REFRESH_FREQ = 50

.equ CORRECTION_VALUE = REFRESH_FREQ/2
.equ CORRECTION_DECREMENT=1

.equ ADC_CHANNEL_0 = 0
.equ ADC_CHANNEL_1 = 1
.equ ADC_CHANNEL_2 = 2
.equ ADC_MIN=374
.equ VREF=2500
.equ VBAT_MAX=8400*1024/4/VREF

.equ DAC_MUL=6;16

.equ MODE_CLOCK = 0
.equ MODE_SET_CLOCK_HOURS = 1
.equ MODE_SET_CLOCK_MINUTES = 2
.equ MODE_SET_DAY_OF_WEEK = 3
.equ MODE_SET_CORRECTION_VALUE = 4
.equ MODE_SET_ALARM_HOURS = 5
.equ MODE_SET_ALARM_MINUTES = 6
.equ MODE_DISPLAY_OFF = 7

.equ RECEIVE_BLOCK_INTERVAL = 4000

.def cntrl=r26
.def cntrh=r27
.def seconds=r25
.def minutes=r24
.def hours=r23
.def day_of_week=r22
.def temph=r21
.def templ=r20
.def mode=r19
.def alarmh=r15
.def alarmm=r14
.def alarm_melody_length_high=r13
.def alarm_melody_length_low=r12
.def phase_table_high=r11
.def phase_table_low=r10
.def adc_channel=r9
.def tmpSREG=r8
.def receive_blocked_counter_h=r7
.def receive_blocked_counter_l=r6
.def receive_counter=r5
.def correction_value_reg=r4

.CSEG

.org 0
  rjmp Start

.org OC2addr
  in  tmpSREG, sreg
  push ZL
  push ZH
  push r16
  push r17
  push r18
  push r0
  push r1
  push r2

  wdr

  tst  receive_blocked_counter_l
  breq next_check
  dec  receive_blocked_counter_l
  rjmp receive_blocked
next_check:
  tst  receive_blocked_counter_h
  breq receive_not_blocked
  dec  receive_blocked_counter_l
  dec  receive_blocked_counter_h
  rjmp receive_blocked

receive_not_blocked:

; ir receiver status
  tst  receive_counter
  brne ir_counter_increment
  sbic PIND, PIND2
  rjmp ir_counter_complete
ir_counter_increment:
  inc  receive_counter
ir_counter_complete:

receive_blocked:

; alarm counter test
  tst alarm_melody_length_low
  brne alarm_melody_out
  tst alarm_melody_length_high
  breq no_alarm_melody_out
; alarm counter decrement
  dec alarm_melody_length_high
alarm_melody_out:
  dec alarm_melody_length_low

; spi out
  cbi PORTB, PORTB0 ; Select DAC

  movw ZH:ZL, YH:YL
  lpm r16, Z+
  movw YH:YL, ZH:ZL
  ldi r17, DAC_MUL
  mul r17, r16
  ; Start transmission of data (r1)
  out SPDR, r1
Wait_Transmit1:
  ; Wait for transmission complete
  sbis SPSR, SPIF
  rjmp Wait_Transmit1
  in   r1, SPDR

  ; Start transmission of data (r0)
  out SPDR, r0
Wait_Transmit2:
  ; Wait for transmission complete
  sbis SPSR, SPIF
  rjmp Wait_Transmit2
  in   r1, SPDR
  sbi PORTB, PORTB0 ; Unselect DAC
  rjmp alarm_out_done

no_alarm_melody_out:
  cbi PORTD, PORTD3 ; Turn OFF amplifier
alarm_out_done:

  inc  cntrl

  ldi  r16, CNTRL_MAX
  cp   cntrh, correction_value_reg
  brlo no_correction
.ifdef CORRECTION_INCREMENT
  inc  r16
.endif
.ifdef CORRECTION_DECREMENT
  dec  r16
.endif

no_correction:
  cp   cntrl, r16
  brne no_cntrl_max
  clr  cntrl
  inc  cntrh
  cpi  cntrh, REFRESH_FREQ
  brne no_cntrh_max
  clr  cntrh
  inc  seconds
  cpi  seconds, 60
  brne not_s60
  clr  seconds
  inc  minutes
  cpi  minutes, 60
  brne not_m60
  clr  minutes
  inc  hours
  cpi  hours, 24
  brne not_h24
  clr  hours
  inc  day_of_week
  cpi  day_of_week, 8
  brne not_dow_8
  ldi  day_of_week, 1
not_dow_8:
not_m60:
not_h24:
not_s60:
  cp   minutes, alarmm
  brne no_alarm
  cp   hours, alarmh
  brne no_alarm
  cpi  day_of_week, 6 ; alarm only for days 1..5
  brsh no_alarm

  tst alarm_melody_length_low
  brne alarm_melody_in_progress
  tst alarm_melody_length_high
  brne alarm_melody_in_progress

; alarm init code
  ldi  ZL, low(2*alarm_melody)
  ldi  ZH, high(2*alarm_melody)
  lpm  alarm_melody_length_low, Z+
  lpm  alarm_melody_length_high, Z+
  movw YH:YL, ZH:ZL
  sbi PORTD, PORTD3 ; Turn ON amplifier

alarm_melody_in_progress:
no_cntrl_max:
no_cntrh_max:
no_alarm:
  cpi   mode, MODE_DISPLAY_OFF
  brne  no_phase4
  rcall phase4
  rjmp  out_done
no_phase4:
  clr  r16
  movw ZH:ZL, phase_table_high:phase_table_low
  add  ZL, cntrl
  adc  ZH, r16
  icall
out_done:
  pop r2
  pop r1
  pop r0
  pop r18
  pop r17
  pop r16
  pop ZH
  pop ZL
  out sreg, tmpSREG
  reti

temp_off0:
  sbi PORTB, PORTB5
  ret
temp_off1:
  sbi PORTB, PORTB6
  ret
phase4:
  clr r16
  sts PORTG, r16
  sbi PORTB, PORTB5
  sbi PORTB, PORTB6
  sbi PORTB, PORTB7

  tst cntrh
  breq adc_check
  ret
adc_check:
; adc check
  sbic ADCSRA, ADSC
  rjmp adc_not_ready
  mov  r16, adc_channel
  andi r16, 3
  brne not_ch_0
  ; channel 0 - temp sensor
.ifndef TEST
  in   templ, ADCL
  in   temph, ADCH
.else
  ldi  templ, low(ADC_MIN+9)
  ldi  temph, high(ADC_MIN+9)
.endif
  subi templ, low(ADC_MIN)
  sbci temph, high(ADC_MIN)
  rjmp adc_read_done
not_ch_0:
  ; channel 1 - vbat

; power check
  sbic PINF, PINF2
  rjmp power_ok
  ldi r16, low(phase_table_bat)
  mov phase_table_low, r16
  ldi r16, high(phase_table_bat)
  mov phase_table_high, r16
  ldi r16, PWM_STOP ; Normal port operation, OC0 disconnected.
  out TCCR0, r16
  rjmp power_check_done
power_ok:
  ldi r16, low(phase_table_normal)
  mov phase_table_low, r16
  ldi r16, high(phase_table_normal)
  mov phase_table_high, r16

  in   r16, ADCL
  in   r17, ADCH
  clc
  ror  r17
  ror  r16
  clc
  ror  r17
  ror  r16
  cpi  r16, VBAT_MAX/4
  brlo charge
  ldi r16, PWM_STOP ; Normal port operation, OC0 disconnected.
  out TCCR0, r16
  rjmp adc_read_done
charge:
  ldi r16, PWM_START ; Clear OC0 on Compare Match, set OC0 at BOTTOM, (non-inverting mode).
  out TCCR0, r16
power_check_done:
adc_read_done:
  inc adc_channel
  ldi r16, ADC_CHANNEL_2
  cp  adc_channel, r16
  brne no_ch_2
  andi r16, $FC
  mov  adc_channel, r16
no_ch_2:
  ; set ADC channel no
  out  ADMUX, adc_channel
  ; Start ADC
  sbi  ADCSRA, ADSC
adc_not_ready:
  ret

Start:
  ; Initialize the stack pointer
  ldi R24, low(RAMEND)	;  SP <-- RAMEND
  ldi R25, high(RAMEND)
  out SPL, R24
  out SPH, R25

  clr r16
  out PORTA, r16
  out PORTC, r16
  sts PORTG, r16
  out PORTD, r16
  sts PORTF, r16
  sts DDRF,  r16
  ldi r16,   8
  out DDRD,  r16
  ldi r16,   $E1
  out PORTB, r16
  ldi r16,   $F7
  out DDRB,  r16
  ldi r16,   3
  sts DDRG,  r16
  ser r16 ; r16 <= $FF
  out PORTE, r16
  out DDRE,  r16
  out DDRA,  r16
  ldi r16,   $7F
  out DDRC,  r16
;  ldi r16,   $0C
;  out PORTE, r16

  ; Configure ADC
  ; Reference - external
  ldi r16, ADC_CHANNEL_0
  mov adc_channel, r16
  out ADMUX, r16
  ; Enable ADC, set prescaler - 128 (ADC clk should be 50-200 khz)
  ldi r16, (1<<ADEN) | (1<<ADPS2) | (1<<ADPS1) | (1<<ADPS0)
  out ADCSRA, r16

  ; Configure WDT
  ldi r16, (1<<WDCE)|(1<<WDE)
  out WDTCR, r16
  ldi r16, (1<<WDCE)|(1<<WDE)
  out WDTCR, r16

  ; Enable sleep command, idle mode
  ldi r16, (1<<SE)
  out MCUCR, r16

  ; Enable SPI, Master, set clock rate fck/2
  sbi  SPSR, 0
  ldi  r17, (1<<SPE)|(1<<MSTR)
  out  SPCR, r17


  clr cntrh
  clr cntrl
  clr seconds
  clr minutes
  clr hours
  ldi day_of_week, 1
  clr alarmm
.ifdef TEST
  inc alarmm
  clr alarmh
  ldi seconds, 59
.else
  ldi r16, $80
  mov alarmh, r16
.endif
  clr alarm_melody_length_high
  clr alarm_melody_length_low

  clr temph
  clr templ

  clr receive_counter
  clr receive_blocked_counter_l
  clr receive_blocked_counter_h

  ldi r16, low(phase_table_normal)
  mov phase_table_low, r16
  ldi r16, high(phase_table_normal)
  mov phase_table_high, r16

  clr mode

  ldi r16, CORRECTION_VALUE
  mov correction_value_reg, r16

  clr r16
  out TCNT2, r16
  out TCNT0, r16
  ldi r16, T0CODE
  out OCR2, r16
  ; Timer 2 - clkI/O/8 (From prescaler), Clear Timer on Compare Match (CTC) Mode
  ldi r16, (1<<WGM21) | (1<<CS21)
  ; Start timer 2
  out  TCCR2, r16

  ; Enable Timer 2 interrupt
  ldi r16, 1<<OCIE2
  out TIMSK, r16

  ldi r16, PWMCODE
  out OCR0, r16
  ; Timer 0 - clkI/O (no prescaling), Fast PWM Mode
  ldi r16, PWM_STOP
  ; Start timer 0
  out TCCR0, r16

  sei
Sleep_:
.ifndef TEST
  sleep
.endif
  tst  receive_counter
  brmi Sleep_
  breq Sleep_
.include "hp_decoder.asm"
;  rjmp Sleep_

get_time_code:
  cpi mode, MODE_SET_ALARM_HOURS
  brsh no_clock_mode
  mov r0, minutes
  mov r2, hours
  rjmp get_code
no_clock_mode:
  mov r0, alarmm
  mov r16, alarmh
  andi r16, $7f
  mov r2, r16
get_code:
  lsl r0
  clr r1
  add ZL, r0
  adc ZH, r1
  clr r0
  clc
  ror r2
  ror r0
  add ZL, r0
  adc ZH, r2
  lpm r16, Z+
  lpm r17, Z
  ret

out_time0:
  ldi ZH, high(2*time0_codes)
  ldi ZL, low(2*time0_codes)
  rcall get_time_code
  sbrc seconds, 0
  ori r17, $20
  sbrs alarmh, 7 ; if alarm is on
  ori r17, $40
  out PORTA, r16
  out PORTC, r17
  ldi r16, 1
  sts PORTG, r16
  ret

out_time1:
  ldi ZH, high(2*time1_codes)
  ldi ZL, low(2*time1_codes)
  rcall get_time_code
  clr r18
  sts PORTG, r18
  out PORTA, r16
  out PORTC, r17
  ldi r16, 2
  sts PORTG, r16
  ret

out_timetemp0:
  rcall out_time0
out_temp0:
  tst mode
  breq temp0_normal
  cpi mode, MODE_SET_ALARM_HOURS
  brsh alarm_mode2
  ldi  r16, $C6 ; C
  out PORTE, r16
  cbi PORTB, PORTB5
  ret
alarm_mode2:
  ldi  r16, $88 ; A
  out PORTE, r16
  cbi PORTB, PORTB5
  ret
temp0_normal:
  ldi ZH, high(2*temp0_codes)
  ldi ZL, low(2*temp0_codes)
  add ZL, templ
  adc ZH, temph
  lpm r16, Z
  out PORTE, r16
  cbi PORTB, PORTB5
  ret

out_temp1:
  tst mode
  breq temp1_normal
  cpi mode, MODE_SET_CORRECTION_VALUE
  breq set_corr_value_mode
  ldi  r16, $C7 ; L
  out PORTE, r16
  cbi PORTB, PORTB6
  ret
temp1_normal:
  ldi ZH, high(2*temp1_codes)
  ldi ZL, low(2*temp1_codes)
  add ZL, templ
  adc ZH, temph
  lpm r16, Z
  out PORTE, r16
  cbi PORTB, PORTB6
  ret
set_corr_value_mode:
  ldi ZH, high(2*seven_seg_codes2)
  ldi ZL, low(2*seven_seg_codes2)
  clr r16
  add ZL, correction_value_reg
  adc ZH, r16
  lpm r16, Z
  out PORTE, r16
  cbi PORTB, PORTB6
  ret

out_temp2:
  tst mode
  breq temp2_normal
  cpi mode, MODE_SET_CORRECTION_VALUE
  breq set_corr_value_mode2
  cpi mode, MODE_SET_CLOCK_HOURS
  breq show_H
  cpi mode, MODE_SET_ALARM_HOURS
  breq show_H
  cpi mode, MODE_SET_CLOCK_MINUTES
  breq show_n
  cpi mode, MODE_SET_ALARM_MINUTES
  breq show_n
  ldi ZH, high(2*seven_seg_codes)
  ldi ZL, low(2*seven_seg_codes)
  clr r16
  add ZL, day_of_week
  adc ZH, r16
  lpm r16, Z
  out PORTE, r16
  cbi PORTB, PORTB7
  ret
show_H:
  ldi  r16, $89 ; H
  out PORTE, r16
  cbi PORTB, PORTB7
  ret
show_n:
  ldi  r16, $AB ; n
  out PORTE, r16
  cbi PORTB, PORTB7
  ret
temp2_normal:
  ldi ZH, high(2*temp2_codes)
  ldi ZL, low(2*temp2_codes)
  add ZL, templ
  adc ZH, temph
  lpm r16, Z
  out PORTE, r16
  cbi PORTB, PORTB7
  ret
set_corr_value_mode2:
  ldi ZH, high(2*seven_seg_codes)
  ldi ZL, low(2*seven_seg_codes)
  clr r16
  add ZL, correction_value_reg
  adc ZH, r16
  lpm r16, Z
  out PORTE, r16
  cbi PORTB, PORTB7
  ret

button1_handler:
  tst mode
  brne display_on
  ldi mode, MODE_DISPLAY_OFF
  ret
display_on:
  clr mode
  ret

button2_handler:
  ldi r16, $80
  eor alarmh, r16
  ret

button3_handler:
  ldi mode, MODE_SET_CLOCK_HOURS
  ret

button4_handler:
  ldi mode, MODE_SET_CLOCK_MINUTES
  ret

button5_handler:
  ldi mode, MODE_SET_DAY_OF_WEEK
  ret

button6_handler:
  ldi mode, MODE_SET_ALARM_HOURS
  ret

button7_handler:
  ldi mode, MODE_SET_ALARM_MINUTES
  ret

button8_handler:
  ldi mode, MODE_SET_CORRECTION_VALUE
  ret

button9_handler:
  ret

button10_handler:
  ret

button11_handler:
  ret

button12_handler: ; 1
  ldi  r16, 1
  rjmp numeric_input

button13_handler: ; 2
  ldi  r16, 2
  rjmp numeric_input

button14_handler: ; 3
  ldi  r16, 3
  rjmp numeric_input

button15_handler: ; 4
  ldi  r16, 4
  rjmp numeric_input

button16_handler: ; 5
  ldi  r16, 5
  rjmp numeric_input

button17_handler: ; 6
  ldi  r16, 6
  rjmp numeric_input

button18_handler: ; 7
  ldi  r16, 7
  rjmp numeric_input

button19_handler: ; 8
  ldi  r16, 8
  rjmp numeric_input

button20_handler: ; 9
  ldi  r16, 9
  rjmp numeric_input

button21_handler:
  ret

button22_handler: ; 0
  clr  r16
numeric_input:
  cpi mode, MODE_SET_CLOCK_HOURS
  brne not_mode_1
  mov  r17, hours
  lsl  hours
  lsl  hours
  lsl  hours
  add  hours, r17
  add  hours, r17
  add  hours, r16
  cpi  hours, 24
  brlo hours_ok
  mov  hours, r16
hours_ok:
  ret
not_mode_1:
  cpi mode, MODE_SET_ALARM_HOURS
  brne not_mode_2
  mov  r17, alarmh
  lsl  alarmh
  lsl  alarmh
  lsl  alarmh
  add  alarmh, r17
  add  alarmh, r17
  add  alarmh, r16
  mov  r17, alarmh
  cpi  r17, 24
  brlo alarmh_ok
  mov  alarmh, r16
alarmh_ok:
  ret
not_mode_2:
  cpi mode, MODE_SET_DAY_OF_WEEK
  brne not_mode_3
  mov day_of_week, r16
  ret
not_mode_3:
  cpi mode, MODE_SET_CLOCK_MINUTES
  brne not_mode_4
  mov  r17, minutes
  lsl  minutes
  lsl  minutes
  lsl  minutes
  add  minutes, r17
  add  minutes, r17
  add  minutes, r16
  cpi  minutes, 60
  brlo minutes_ok
  mov  minutes, r16
minutes_ok:
  ret
not_mode_4:
  cpi mode, MODE_SET_ALARM_MINUTES
  brne not_mode_5
  mov  r17, alarmm
  lsl  alarmm
  lsl  alarmm
  lsl  alarmm
  add  alarmm, r17
  add  alarmm, r17
  add  alarmm, r16
  mov  r17, alarmm
  cpi  r17, 60
  brlo alarmm_ok
  mov  alarmm, r16
alarmm_ok:
  ret
not_mode_5:
  cpi mode, MODE_SET_CORRECTION_VALUE
  brne not_mode_6
  mov  r17, correction_value_reg
  lsl  correction_value_reg
  lsl  correction_value_reg
  lsl  correction_value_reg
  add  correction_value_reg, r17
  add  correction_value_reg, r17
  add  correction_value_reg, r16
  mov  r17, correction_value_reg
  cpi  r17, 50
  brlo correction_value_ok
  mov  correction_value_reg, r16
correction_value_ok:
  ret
not_mode_6:
  ret

button23_handler:
  ret

seven_seg_codes:
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90
.db $C0, $F9, $A4, $B0, $99, $92, $82, $F8, $80, $90

seven_seg_codes2:
.db $C0,$C0,$C0,$C0,$C0,$C0,$C0,$C0,$C0,$C0
.db $F9,$F9,$F9,$F9,$F9,$F9,$F9,$F9,$F9,$F9
.db $A4,$A4,$A4,$A4,$A4,$A4,$A4,$A4,$A4,$A4
.db $B0,$B0,$B0,$B0,$B0,$B0,$B0,$B0,$B0,$B0
.db $99,$99,$99,$99,$99,$99,$99,$99,$99,$99
.db $92,$92,$92,$92,$92,$92,$92,$92,$92,$92
.db $82,$82,$82,$82,$82,$82,$82,$82,$82,$82
.db $F8,$F8,$F8,$F8,$F8,$F8,$F8,$F8,$F8,$F8
.db $80,$80,$80,$80,$80,$80,$80,$80,$80,$80
.db $90,$90,$90,$90,$90,$90,$90,$90,$90,$90

.include "phase_table.asm"

time0_codes:
.dw 7157,501,4085,3573,5621,7669,8181,501,8181,7669,7093,437,4021,3509,5557,7605
.dw 8117,437,8117,7605,6901,245,3829,3317,5365,7413,7925,245,7925,7413,7157,501
.dw 4085,3573,5621,7669,8181,501,8181,7669,7093,437,4021,3509,5557,7605,8117,437
.dw 8117,7605,7029,373,3957,3445,5493,7541,8053,373,8053,7541,0,0,0,0
.dw 7105,449,4033,3521,5569,7617,8129,449,8129,7617,7041,385,3969,3457,5505,7553
.dw 8065,385,8065,7553,6849,193,3777,3265,5313,7361,7873,193,7873,7361,7105,449
.dw 4033,3521,5569,7617,8129,449,8129,7617,7041,385,3969,3457,5505,7553,8065,385
.dw 8065,7553,6977,321,3905,3393,5441,7489,8001,321,8001,7489,0,0,0,0
.dw 7133,477,4061,3549,5597,7645,8157,477,8157,7645,7069,413,3997,3485,5533,7581
.dw 8093,413,8093,7581,6877,221,3805,3293,5341,7389,7901,221,7901,7389,7133,477
.dw 4061,3549,5597,7645,8157,477,8157,7645,7069,413,3997,3485,5533,7581,8093,413
.dw 8093,7581,7005,349,3933,3421,5469,7517,8029,349,8029,7517,0,0,0,0
.dw 7129,473,4057,3545,5593,7641,8153,473,8153,7641,7065,409,3993,3481,5529,7577
.dw 8089,409,8089,7577,6873,217,3801,3289,5337,7385,7897,217,7897,7385,7129,473
.dw 4057,3545,5593,7641,8153,473,8153,7641,7065,409,3993,3481,5529,7577,8089,409
.dw 8089,7577,7001,345,3929,3417,5465,7513,8025,345,8025,7513,0,0,0,0
.dw 7145,489,4073,3561,5609,7657,8169,489,8169,7657,7081,425,4009,3497,5545,7593
.dw 8105,425,8105,7593,6889,233,3817,3305,5353,7401,7913,233,7913,7401,7145,489
.dw 4073,3561,5609,7657,8169,489,8169,7657,7081,425,4009,3497,5545,7593,8105,425
.dw 8105,7593,7017,361,3945,3433,5481,7529,8041,361,8041,7529,0,0,0,0
.dw 7161,505,4089,3577,5625,7673,8185,505,8185,7673,7097,441,4025,3513,5561,7609
.dw 8121,441,8121,7609,6905,249,3833,3321,5369,7417,7929,249,7929,7417,7161,505
.dw 4089,3577,5625,7673,8185,505,8185,7673,7097,441,4025,3513,5561,7609,8121,441
.dw 8121,7609,7033,377,3961,3449,5497,7545,8057,377,8057,7545,0,0,0,0
.dw 7165,509,4093,3581,5629,7677,8189,509,8189,7677,7101,445,4029,3517,5565,7613
.dw 8125,445,8125,7613,6909,253,3837,3325,5373,7421,7933,253,7933,7421,7165,509
.dw 4093,3581,5629,7677,8189,509,8189,7677,7101,445,4029,3517,5565,7613,8125,445
.dw 8125,7613,7037,381,3965,3453,5501,7549,8061,381,8061,7549,0,0,0,0
.dw 7105,449,4033,3521,5569,7617,8129,449,8129,7617,7041,385,3969,3457,5505,7553
.dw 8065,385,8065,7553,6849,193,3777,3265,5313,7361,7873,193,7873,7361,7105,449
.dw 4033,3521,5569,7617,8129,449,8129,7617,7041,385,3969,3457,5505,7553,8065,385
.dw 8065,7553,6977,321,3905,3393,5441,7489,8001,321,8001,7489,0,0,0,0
.dw 7165,509,4093,3581,5629,7677,8189,509,8189,7677,7101,445,4029,3517,5565,7613
.dw 8125,445,8125,7613,6909,253,3837,3325,5373,7421,7933,253,7933,7421,7165,509
.dw 4093,3581,5629,7677,8189,509,8189,7677,7101,445,4029,3517,5565,7613,8125,445
.dw 8125,7613,7037,381,3965,3453,5501,7549,8061,381,8061,7549,0,0,0,0
.dw 7161,505,4089,3577,5625,7673,8185,505,8185,7673,7097,441,4025,3513,5561,7609
.dw 8121,441,8121,7609,6905,249,3833,3321,5369,7417,7929,249,7929,7417,7161,505
.dw 4089,3577,5625,7673,8185,505,8185,7673,7097,441,4025,3513,5561,7609,8121,441
.dw 8121,7609,7033,377,3961,3449,5497,7545,8057,377,8057,7545,0,0,0,0
.dw 7157,501,4085,3573,5621,7669,8181,501,8181,7669,7093,437,4021,3509,5557,7605
.dw 8117,437,8117,7605,6901,245,3829,3317,5365,7413,7925,245,7925,7413,7157,501
.dw 4085,3573,5621,7669,8181,501,8181,7669,7093,437,4021,3509,5557,7605,8117,437
.dw 8117,7605,7029,373,3957,3445,5493,7541,8053,373,8053,7541,0,0,0,0
.dw 7105,449,4033,3521,5569,7617,8129,449,8129,7617,7041,385,3969,3457,5505,7553
.dw 8065,385,8065,7553,6849,193,3777,3265,5313,7361,7873,193,7873,7361,7105,449
.dw 4033,3521,5569,7617,8129,449,8129,7617,7041,385,3969,3457,5505,7553,8065,385
.dw 8065,7553,6977,321,3905,3393,5441,7489,8001,321,8001,7489,0,0,0,0
.dw 7132,476,4060,3548,5596,7644,8156,476,8156,7644,7068,412,3996,3484,5532,7580
.dw 8092,412,8092,7580,6876,220,3804,3292,5340,7388,7900,220,7900,7388,7132,476
.dw 4060,3548,5596,7644,8156,476,8156,7644,7068,412,3996,3484,5532,7580,8092,412
.dw 8092,7580,7004,348,3932,3420,5468,7516,8028,348,8028,7516,0,0,0,0
.dw 7104,448,4032,3520,5568,7616,8128,448,8128,7616,7040,384,3968,3456,5504,7552
.dw 8064,384,8064,7552,6848,192,3776,3264,5312,7360,7872,192,7872,7360,7104,448
.dw 4032,3520,5568,7616,8128,448,8128,7616,7040,384,3968,3456,5504,7552,8064,384
.dw 8064,7552,6976,320,3904,3392,5440,7488,8000,320,8000,7488,0,0,0,0
.dw 7132,476,4060,3548,5596,7644,8156,476,8156,7644,7068,412,3996,3484,5532,7580
.dw 8092,412,8092,7580,6876,220,3804,3292,5340,7388,7900,220,7900,7388,7132,476
.dw 4060,3548,5596,7644,8156,476,8156,7644,7068,412,3996,3484,5532,7580,8092,412
.dw 8092,7580,7004,348,3932,3420,5468,7516,8028,348,8028,7516,0,0,0,0
.dw 7128,472,4056,3544,5592,7640,8152,472,8152,7640,7064,408,3992,3480,5528,7576
.dw 8088,408,8088,7576,6872,216,3800,3288,5336,7384,7896,216,7896,7384,7128,472
.dw 4056,3544,5592,7640,8152,472,8152,7640,7064,408,3992,3480,5528,7576,8088,408
.dw 8088,7576,7000,344,3928,3416,5464,7512,8024,344,8024,7512,0,0,0,0
.dw 7144,488,4072,3560,5608,7656,8168,488,8168,7656,7080,424,4008,3496,5544,7592
.dw 8104,424,8104,7592,6888,232,3816,3304,5352,7400,7912,232,7912,7400,7144,488
.dw 4072,3560,5608,7656,8168,488,8168,7656,7080,424,4008,3496,5544,7592,8104,424
.dw 8104,7592,7016,360,3944,3432,5480,7528,8040,360,8040,7528,0,0,0,0
.dw 7160,504,4088,3576,5624,7672,8184,504,8184,7672,7096,440,4024,3512,5560,7608
.dw 8120,440,8120,7608,6904,248,3832,3320,5368,7416,7928,248,7928,7416,7160,504
.dw 4088,3576,5624,7672,8184,504,8184,7672,7096,440,4024,3512,5560,7608,8120,440
.dw 8120,7608,7032,376,3960,3448,5496,7544,8056,376,8056,7544,0,0,0,0
.dw 7164,508,4092,3580,5628,7676,8188,508,8188,7676,7100,444,4028,3516,5564,7612
.dw 8124,444,8124,7612,6908,252,3836,3324,5372,7420,7932,252,7932,7420,7164,508
.dw 4092,3580,5628,7676,8188,508,8188,7676,7100,444,4028,3516,5564,7612,8124,444
.dw 8124,7612,7036,380,3964,3452,5500,7548,8060,380,8060,7548,0,0,0,0
.dw 7104,448,4032,3520,5568,7616,8128,448,8128,7616,7040,384,3968,3456,5504,7552
.dw 8064,384,8064,7552,6848,192,3776,3264,5312,7360,7872,192,7872,7360,7104,448
.dw 4032,3520,5568,7616,8128,448,8128,7616,7040,384,3968,3456,5504,7552,8064,384
.dw 8064,7552,6976,320,3904,3392,5440,7488,8000,320,8000,7488,0,0,0,0
.dw 7164,508,4092,3580,5628,7676,8188,508,8188,7676,7100,444,4028,3516,5564,7612
.dw 8124,444,8124,7612,6908,252,3836,3324,5372,7420,7932,252,7932,7420,7164,508
.dw 4092,3580,5628,7676,8188,508,8188,7676,7100,444,4028,3516,5564,7612,8124,444
.dw 8124,7612,7036,380,3964,3452,5500,7548,8060,380,8060,7548,0,0,0,0
.dw 7160,504,4088,3576,5624,7672,8184,504,8184,7672,7096,440,4024,3512,5560,7608
.dw 8120,440,8120,7608,6904,248,3832,3320,5368,7416,7928,248,7928,7416,7160,504
.dw 4088,3576,5624,7672,8184,504,8184,7672,7096,440,4024,3512,5560,7608,8120,440
.dw 8120,7608,7032,376,3960,3448,5496,7544,8056,376,8056,7544,0,0,0,0
.dw 7156,500,4084,3572,5620,7668,8180,500,8180,7668,7092,436,4020,3508,5556,7604
.dw 8116,436,8116,7604,6900,244,3828,3316,5364,7412,7924,244,7924,7412,7156,500
.dw 4084,3572,5620,7668,8180,500,8180,7668,7092,436,4020,3508,5556,7604,8116,436
.dw 8116,7604,7028,372,3956,3444,5492,7540,8052,372,8052,7540,0,0,0,0
.dw 7104,448,4032,3520,5568,7616,8128,448,8128,7616,7040,384,3968,3456,5504,7552
.dw 8064,384,8064,7552,6848,192,3776,3264,5312,7360,7872,192,7872,7360,7104,448
.dw 4032,3520,5568,7616,8128,448,8128,7616,7040,384,3968,3456,5504,7552,8064,384
.dw 8064,7552,6976,320,3904,3392,5440,7488,8000,320,8000,7488,0,0,0,0

time1_codes:
.dw 8056,3960,6008,8056,3960,7032,7032,8056,8056,8056,7224,3128,5176,7224,3128,6200
.dw 6200,7224,7224,7224,8120,4024,6072,8120,4024,7096,7096,8120,8120,8120,7608,3512
.dw 5560,7608,3512,6584,6584,7608,7608,7608,7416,3320,5368,7416,3320,6392,6392,7416
.dw 7416,7416,7672,3576,5624,7672,3576,6648,6648,7672,7672,7672,0,0,0,0
.dw 8024,3928,5976,8024,3928,7000,7000,8024,8024,8024,7192,3096,5144,7192,3096,6168
.dw 6168,7192,7192,7192,8088,3992,6040,8088,3992,7064,7064,8088,8088,8088,7576,3480
.dw 5528,7576,3480,6552,6552,7576,7576,7576,7384,3288,5336,7384,3288,6360,6360,7384
.dw 7384,7384,7640,3544,5592,7640,3544,6616,6616,7640,7640,7640,0,0,0,0
.dw 8040,3944,5992,8040,3944,7016,7016,8040,8040,8040,7208,3112,5160,7208,3112,6184
.dw 6184,7208,7208,7208,8104,4008,6056,8104,4008,7080,7080,8104,8104,8104,7592,3496
.dw 5544,7592,3496,6568,6568,7592,7592,7592,7400,3304,5352,7400,3304,6376,6376,7400
.dw 7400,7400,7656,3560,5608,7656,3560,6632,6632,7656,7656,7656,0,0,0,0
.dw 8056,3960,6008,8056,3960,7032,7032,8056,8056,8056,7224,3128,5176,7224,3128,6200
.dw 6200,7224,7224,7224,8120,4024,6072,8120,4024,7096,7096,8120,8120,8120,7608,3512
.dw 5560,7608,3512,6584,6584,7608,7608,7608,7416,3320,5368,7416,3320,6392,6392,7416
.dw 7416,7416,7672,3576,5624,7672,3576,6648,6648,7672,7672,7672,0,0,0,0
.dw 8024,3928,5976,8024,3928,7000,7000,8024,8024,8024,7192,3096,5144,7192,3096,6168
.dw 6168,7192,7192,7192,8088,3992,6040,8088,3992,7064,7064,8088,8088,8088,7576,3480
.dw 5528,7576,3480,6552,6552,7576,7576,7576,7384,3288,5336,7384,3288,6360,6360,7384
.dw 7384,7384,7640,3544,5592,7640,3544,6616,6616,7640,7640,7640,0,0,0,0
.dw 8048,3952,6000,8048,3952,7024,7024,8048,8048,8048,7216,3120,5168,7216,3120,6192
.dw 6192,7216,7216,7216,8112,4016,6064,8112,4016,7088,7088,8112,8112,8112,7600,3504
.dw 5552,7600,3504,6576,6576,7600,7600,7600,7408,3312,5360,7408,3312,6384,6384,7408
.dw 7408,7408,7664,3568,5616,7664,3568,6640,6640,7664,7664,7664,0,0,0,0
.dw 8048,3952,6000,8048,3952,7024,7024,8048,8048,8048,7216,3120,5168,7216,3120,6192
.dw 6192,7216,7216,7216,8112,4016,6064,8112,4016,7088,7088,8112,8112,8112,7600,3504
.dw 5552,7600,3504,6576,6576,7600,7600,7600,7408,3312,5360,7408,3312,6384,6384,7408
.dw 7408,7408,7664,3568,5616,7664,3568,6640,6640,7664,7664,7664,0,0,0,0
.dw 8056,3960,6008,8056,3960,7032,7032,8056,8056,8056,7224,3128,5176,7224,3128,6200
.dw 6200,7224,7224,7224,8120,4024,6072,8120,4024,7096,7096,8120,8120,8120,7608,3512
.dw 5560,7608,3512,6584,6584,7608,7608,7608,7416,3320,5368,7416,3320,6392,6392,7416
.dw 7416,7416,7672,3576,5624,7672,3576,6648,6648,7672,7672,7672,0,0,0,0
.dw 8056,3960,6008,8056,3960,7032,7032,8056,8056,8056,7224,3128,5176,7224,3128,6200
.dw 6200,7224,7224,7224,8120,4024,6072,8120,4024,7096,7096,8120,8120,8120,7608,3512
.dw 5560,7608,3512,6584,6584,7608,7608,7608,7416,3320,5368,7416,3320,6392,6392,7416
.dw 7416,7416,7672,3576,5624,7672,3576,6648,6648,7672,7672,7672,0,0,0,0
.dw 8056,3960,6008,8056,3960,7032,7032,8056,8056,8056,7224,3128,5176,7224,3128,6200
.dw 6200,7224,7224,7224,8120,4024,6072,8120,4024,7096,7096,8120,8120,8120,7608,3512
.dw 5560,7608,3512,6584,6584,7608,7608,7608,7416,3320,5368,7416,3320,6392,6392,7416
.dw 7416,7416,7672,3576,5624,7672,3576,6648,6648,7672,7672,7672,0,0,0,0
.dw 8062,3966,6014,8062,3966,7038,7038,8062,8062,8062,7230,3134,5182,7230,3134,6206
.dw 6206,7230,7230,7230,8126,4030,6078,8126,4030,7102,7102,8126,8126,8126,7614,3518
.dw 5566,7614,3518,6590,6590,7614,7614,7614,7422,3326,5374,7422,3326,6398,6398,7422
.dw 7422,7422,7678,3582,5630,7678,3582,6654,6654,7678,7678,7678,0,0,0,0
.dw 8030,3934,5982,8030,3934,7006,7006,8030,8030,8030,7198,3102,5150,7198,3102,6174
.dw 6174,7198,7198,7198,8094,3998,6046,8094,3998,7070,7070,8094,8094,8094,7582,3486
.dw 5534,7582,3486,6558,6558,7582,7582,7582,7390,3294,5342,7390,3294,6366,6366,7390
.dw 7390,7390,7646,3550,5598,7646,3550,6622,6622,7646,7646,7646,0,0,0,0
.dw 24430,20334,22382,24430,20334,23406,23406,24430,24430,24430,23598,19502,21550,23598,19502,22574
.dw 22574,23598,23598,23598,24494,20398,22446,24494,20398,23470,23470,24494,24494,24494,23982,19886
.dw 21934,23982,19886,22958,22958,23982,23982,23982,23790,19694,21742,23790,19694,22766,22766,23790
.dw 23790,23790,24046,19950,21998,24046,19950,23022,23022,24046,24046,24046,0,0,0,0
.dw 24408,20312,22360,24408,20312,23384,23384,24408,24408,24408,23576,19480,21528,23576,19480,22552
.dw 22552,23576,23576,23576,24472,20376,22424,24472,20376,23448,23448,24472,24472,24472,23960,19864
.dw 21912,23960,19864,22936,22936,23960,23960,23960,23768,19672,21720,23768,19672,22744,22744,23768
.dw 23768,23768,24024,19928,21976,24024,19928,23000,23000,24024,24024,24024,0,0,0,0
.dw 24424,20328,22376,24424,20328,23400,23400,24424,24424,24424,23592,19496,21544,23592,19496,22568
.dw 22568,23592,23592,23592,24488,20392,22440,24488,20392,23464,23464,24488,24488,24488,23976,19880
.dw 21928,23976,19880,22952,22952,23976,23976,23976,23784,19688,21736,23784,19688,22760,22760,23784
.dw 23784,23784,24040,19944,21992,24040,19944,23016,23016,24040,24040,24040,0,0,0,0
.dw 24440,20344,22392,24440,20344,23416,23416,24440,24440,24440,23608,19512,21560,23608,19512,22584
.dw 22584,23608,23608,23608,24504,20408,22456,24504,20408,23480,23480,24504,24504,24504,23992,19896
.dw 21944,23992,19896,22968,22968,23992,23992,23992,23800,19704,21752,23800,19704,22776,22776,23800
.dw 23800,23800,24056,19960,22008,24056,19960,23032,23032,24056,24056,24056,0,0,0,0
.dw 24408,20312,22360,24408,20312,23384,23384,24408,24408,24408,23576,19480,21528,23576,19480,22552
.dw 22552,23576,23576,23576,24472,20376,22424,24472,20376,23448,23448,24472,24472,24472,23960,19864
.dw 21912,23960,19864,22936,22936,23960,23960,23960,23768,19672,21720,23768,19672,22744,22744,23768
.dw 23768,23768,24024,19928,21976,24024,19928,23000,23000,24024,24024,24024,0,0,0,0
.dw 24432,20336,22384,24432,20336,23408,23408,24432,24432,24432,23600,19504,21552,23600,19504,22576
.dw 22576,23600,23600,23600,24496,20400,22448,24496,20400,23472,23472,24496,24496,24496,23984,19888
.dw 21936,23984,19888,22960,22960,23984,23984,23984,23792,19696,21744,23792,19696,22768,22768,23792
.dw 23792,23792,24048,19952,22000,24048,19952,23024,23024,24048,24048,24048,0,0,0,0
.dw 24432,20336,22384,24432,20336,23408,23408,24432,24432,24432,23600,19504,21552,23600,19504,22576
.dw 22576,23600,23600,23600,24496,20400,22448,24496,20400,23472,23472,24496,24496,24496,23984,19888
.dw 21936,23984,19888,22960,22960,23984,23984,23984,23792,19696,21744,23792,19696,22768,22768,23792
.dw 23792,23792,24048,19952,22000,24048,19952,23024,23024,24048,24048,24048,0,0,0,0
.dw 24440,20344,22392,24440,20344,23416,23416,24440,24440,24440,23608,19512,21560,23608,19512,22584
.dw 22584,23608,23608,23608,24504,20408,22456,24504,20408,23480,23480,24504,24504,24504,23992,19896
.dw 21944,23992,19896,22968,22968,23992,23992,23992,23800,19704,21752,23800,19704,22776,22776,23800
.dw 23800,23800,24056,19960,22008,24056,19960,23032,23032,24056,24056,24056,0,0,0,0
.dw 24440,20344,22392,24440,20344,23416,23416,24440,24440,24440,23608,19512,21560,23608,19512,22584
.dw 22584,23608,23608,23608,24504,20408,22456,24504,20408,23480,23480,24504,24504,24504,23992,19896
.dw 21944,23992,19896,22968,22968,23992,23992,23992,23800,19704,21752,23800,19704,22776,22776,23800
.dw 23800,23800,24056,19960,22008,24056,19960,23032,23032,24056,24056,24056,0,0,0,0
.dw 24440,20344,22392,24440,20344,23416,23416,24440,24440,24440,23608,19512,21560,23608,19512,22584
.dw 22584,23608,23608,23608,24504,20408,22456,24504,20408,23480,23480,24504,24504,24504,23992,19896
.dw 21944,23992,19896,22968,22968,23992,23992,23992,23800,19704,21752,23800,19704,22776,22776,23800
.dw 23800,23800,24056,19960,22008,24056,19960,23032,23032,24056,24056,24056,0,0,0,0
.dw 24446,20350,22398,24446,20350,23422,23422,24446,24446,24446,23614,19518,21566,23614,19518,22590
.dw 22590,23614,23614,23614,24510,20414,22462,24510,20414,23486,23486,24510,24510,24510,23998,19902
.dw 21950,23998,19902,22974,22974,23998,23998,23998,23806,19710,21758,23806,19710,22782,22782,23806
.dw 23806,23806,24062,19966,22014,24062,19966,23038,23038,24062,24062,24062,0,0,0,0
.dw 24414,20318,22366,24414,20318,23390,23390,24414,24414,24414,23582,19486,21534,23582,19486,22558
.dw 22558,23582,23582,23582,24478,20382,22430,24478,20382,23454,23454,24478,24478,24478,23966,19870
.dw 21918,23966,19870,22942,22942,23966,23966,23966,23774,19678,21726,23774,19678,22750,22750,23774
.dw 23774,23774,24030,19934,21982,24030,19934,23006,23006,24030,24030,24030,0,0,0,0

; code for temp 40 is 374
temp0_codes:
.db 153,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176
.db 176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176
.db 176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176
.db 176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176
.db 176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176
.db 176,176,176,176,176,176,176,176,176,176,164,164,164,164,164,164
.db 164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164
.db 164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164
.db 164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164
.db 164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164
.db 164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164
.db 164,164,164,164,164,164,164,164,164,164,164,164,249,249,249,249
.db 249,249,249,249,249,249,249,249,249,249,249,249,249,249,249,249
.db 249,249,249,249,249,249,249,249,249,249,249,249,249,249,249,249
.db 249,249,249,249,249,249,249,249,249,249,249,249,249,249,249,249
.db 249,249,249,249,249,249,249,249,249,249,249,249,249,249,249,249
.db 249,249,249,249,249,249,249,249,249,249,249,249,249,249,249,249
.db 249,249,249,249,249,249,249,249,249,249,249,249,249,249,249,249
.db 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
.db 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
.db 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
.db 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
.db 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
.db 255,255,255,255,255,255,255,255,255,255,255,255,255,255,255

temp1_codes:
.db 64,16,16,16,16,16,16,16,16,0,0,0,0,0,0,0
.db 0,0,120,120,120,120,120,120,120,120,2,2,2,2,2,2
.db 2,2,2,18,18,18,18,18,18,18,18,18,25,25,25,25
.db 25,25,25,25,25,48,48,48,48,48,48,48,48,48,36,36
.db 36,36,36,36,36,36,36,121,121,121,121,121,121,121,121,121
.db 121,64,64,64,64,64,64,64,64,64,16,16,16,16,16,16
.db 16,16,16,16,0,0,0,0,0,0,0,0,0,120,120,120
.db 120,120,120,120,120,120,120,2,2,2,2,2,2,2,2,2
.db 2,18,18,18,18,18,18,18,18,18,18,25,25,25,25,25
.db 25,25,25,25,48,48,48,48,48,48,48,48,48,48,36,36
.db 36,36,36,36,36,36,36,36,121,121,121,121,121,121,121,121
.db 121,121,64,64,64,64,64,64,64,64,64,64,16,16,16,16
.db 16,16,16,16,16,16,0,0,0,0,0,0,0,0,0,0
.db 120,120,120,120,120,120,120,120,120,120,2,2,2,2,2,2
.db 2,2,2,2,18,18,18,18,18,18,18,18,18,18,25,25
.db 25,25,25,25,25,25,25,25,48,48,48,48,48,48,48,48
.db 48,48,36,36,36,36,36,36,36,36,36,36,121,121,121,121
.db 121,121,121,121,121,121,64,64,64,64,64,64,64,64,64,64
.db 16,16,16,16,16,16,16,16,16,16,0,0,0,0,0,0
.db 0,0,0,0,120,120,120,120,120,120,120,120,120,120,2,2
.db 2,2,2,2,2,2,2,2,18,18,18,18,18,18,18,18
.db 18,25,25,25,25,25,25,25,25,25,25,48,48,48,48,48
.db 48,48,48,48,36,36,36,36,36,36,36,36,36,36,121,121
.db 121,121,121,121,121,121,121,64,64,64,64,64,64,64,64

temp2_codes:
.db 192,144,248,130,146,153,176,249,192,144,128,248,146,153,176,164
.db 249,192,128,248,130,146,153,176,164,192,144,128,248,130,146,176
.db 164,249,192,144,128,248,130,153,176,164,249,192,144,128,248,146
.db 153,176,164,249,192,144,128,248,130,153,176,164,249,192,144,128
.db 248,130,146,153,164,249,192,144,128,248,130,146,153,176,164,249
.db 192,144,248,130,146,153,176,164,249,192,144,128,248,130,146,153
.db 176,164,249,192,128,248,130,146,153,176,164,249,192,144,128,248
.db 130,146,153,176,164,249,192,144,128,248,130,146,153,176,164,249
.db 192,144,128,248,130,146,153,176,164,249,192,128,248,130,146,153
.db 176,164,249,192,144,128,248,130,146,153,176,164,249,192,144,128
.db 248,130,146,153,176,164,249,192,144,128,248,130,146,153,176,164
.db 249,192,144,128,248,130,146,153,176,164,249,192,144,128,248,130
.db 146,153,176,164,249,192,144,128,248,130,146,153,176,164,249,192
.db 144,128,248,130,146,153,176,164,249,192,144,128,248,130,146,153
.db 176,164,249,192,144,128,248,130,146,153,176,164,249,192,144,128
.db 248,130,146,153,176,164,249,192,144,128,248,130,146,153,176,164
.db 249,192,144,128,248,130,146,153,176,164,249,192,144,128,248,130
.db 146,153,176,164,249,192,144,128,248,130,146,153,176,164,249,192
.db 144,128,248,130,146,153,176,164,249,192,144,128,248,130,146,153
.db 176,164,249,192,144,128,248,130,146,153,176,164,249,192,144,128
.db 248,130,146,153,176,164,249,192,144,248,130,146,153,176,164,249
.db 192,144,128,248,130,146,153,176,164,249,192,144,128,248,130,146
.db 176,164,249,192,144,128,248,130,146,153,176,164,249,192,144,248
.db 130,146,153,176,164,249,192,144,128,248,146,153,176,164,249

button_codes:
.db 23, 0
; row1
.db 0,132,24, 20
.dw button1_handler
.db 0,68,24,27
.dw button2_handler
.db 0,68,216,0
.dw button3_handler
.db 0,68,216,32
.dw button4_handler
.db 0,68,24,52
.dw button5_handler
; row2
.db 0,132,24,54
.dw button6_handler
.db 0,68,24,42
.dw button7_handler
.db 0,68,24,62
.dw button8_handler
.db 0,68,152,38
.dw button9_handler
.db 0,132,24,30
.dw button10_handler
; row3
.db 0,68,24,22
.dw button11_handler
.db 0,132,24,26
.dw button12_handler
.db 0,132,24,34
.dw button13_handler
.db 0,68,24,58
.dw button14_handler
; row4
.db 0,132,24,3
.dw button15_handler
.db 0,68,24,51
.dw button16_handler
.db 0,68,24,35
.dw button17_handler
; row5
.db 0,132,24,19
.dw button18_handler
.db 0,132,24,2
.dw button19_handler
.db 0,68,24,4
.dw button20_handler
; row6
.db 0,132,24,38
.dw button21_handler
.db 0,132,24,36
.dw button22_handler
.db 0,68,24,6
.dw button23_handler

.ifdef TEST
alarm_melody:
  .dw 5 ; alarm_melody_length
  .db 0, 4, 16, 64, 255 
.else
.include "alarm_melody.asm"
.endif
